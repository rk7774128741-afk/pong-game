<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mini Pong</title>
  <style>
    html,body { height:100%; margin:0; display:flex; align-items:center; justify-content:center;
      background:#111; color:#fff; font-family:sans-serif; }
    canvas { background:#222; display:block; border:4px solid #333; }
    .ui { position: absolute; top:10px; width:100%; text-align:center; font-size:14px; }
  </style>
</head>
<body>
  <div class="ui">W/S to move left paddle • ↑/↓ to move right paddle • First to 7 wins</div>
  <canvas id="c" width="800" height="480"></canvas>
<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');

const PADDLE_W = 12, PADDLE_H = 80;
const BALL_R = 8;

let left = { x: 30, y: canvas.height/2 - PADDLE_H/2, dy: 0, score: 0 };
let right= { x: canvas.width - 30 - PADDLE_W, y: canvas.height/2 - PADDLE_H/2, dy: 0, score: 0 };
let ball = { x: canvas.width/2, y: canvas.height/2, vx: 5, vy: 2 };

let keys = {};
let gameOver = false;

window.addEventListener('keydown', e => keys[e.key] = true);
window.addEventListener('keyup', e => keys[e.key] = false);

function resetBall(winnerSide){
  ball.x = canvas.width/2;
  ball.y = canvas.height/2;
  // send ball toward the player who lost
  const dir = winnerSide === 'left' ? -1 : 1;
  ball.vx = 5 * dir * -1;
  ball.vy = (Math.random()*4-2);
}

function update(){
  if(gameOver) return;
  // paddles movement
  left.dy = (keys['w'] ? -6 : keys['s'] ? 6 : 0);
  right.dy = (keys['ArrowUp'] ? -6 : keys['ArrowDown'] ? 6 : 0);

  left.y += left.dy;
  right.y += right.dy;

  // clamp paddles
  left.y = Math.max(0, Math.min(canvas.height - PADDLE_H, left.y));
  right.y = Math.max(0, Math.min(canvas.height - PADDLE_H, right.y));

  // ball movement
  ball.x += ball.vx;
  ball.y += ball.vy;

  // top/bottom collision
  if(ball.y - BALL_R < 0 || ball.y + BALL_R > canvas.height) {
    ball.vy *= -1;
    ball.y = Math.max(BALL_R, Math.min(canvas.height - BALL_R, ball.y));
  }

  // left paddle collision
  if(ball.x - BALL_R < left.x + PADDLE_W &&
     ball.y > left.y && ball.y < left.y + PADDLE_H) {
    ball.vx = Math.abs(ball.vx) + 0.5; // reflect and slightly speed up
    // tweak vertical velocity based on hit position
    let hit = (ball.y - (left.y + PADDLE_H/2)) / (PADDLE_H/2);
    ball.vy = hit * 6;
    ball.x = left.x + PADDLE_W + BALL_R;
  }

  // right paddle collision
  if(ball.x + BALL_R > right.x &&
     ball.y > right.y && ball.y < right.y + PADDLE_H) {
    ball.vx = -Math.abs(ball.vx) - 0.5;
    let hit = (ball.y - (right.y + PADDLE_H/2)) / (PADDLE_H/2);
    ball.vy = hit * 6;
    ball.x = right.x - BALL_R;
  }

  // scoring
  if(ball.x < 0) {
    right.score++;
    if(right.score >= 7) { gameOver = true; setTimeout(()=>alert('Right player wins! Refresh to play again.'), 50); }
    resetBall('right');
  } else if(ball.x > canvas.width) {
    left.score++;
    if(left.score >= 7) { gameOver = true; setTimeout(()=>alert('Left player wins! Refresh to play again.'), 50); }
    resetBall('left');
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // center dashed line
  ctx.strokeStyle = '#444';
  ctx.lineWidth = 2;
  ctx.setLineDash([10, 10]);
  ctx.beginPath();
  ctx.moveTo(canvas.width/2, 0);
  ctx.lineTo(canvas.width/2, canvas.height);
  ctx.stroke();
  ctx.setLineDash([]);

  // paddles
  ctx.fillStyle = '#fff';
  ctx.fillRect(left.x, left.y, PADDLE_W, PADDLE_H);
  ctx.fillRect(right.x, right.y, PADDLE_W, PADDLE_H);

  // ball
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, BALL_R, 0, Math.PI*2);
  ctx.fill();

  // scores
  ctx.font = '28px monospace';
  ctx.textAlign = 'center';
  ctx.fillText(left.score, canvas.width*0.25, 40);
  ctx.fillText(right.score, canvas.width*0.75, 40);

  if(gameOver){
    ctx.fillStyle = 'rgba(0,0,0,0.6)';
    ctx.fillRect(0, canvas.height/2 - 40, canvas.width, 80);
    ctx.fillStyle = '#fff';
    ctx.font = '32px sans-serif';
    ctx.fillText('Game Over — refresh to play again', canvas.width/2, canvas.height/2+8);
  }
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
